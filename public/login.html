<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>登录_下厨房</title>
  <link rel="stylesheet" href="../css/bootstrap.css" />
  <script src="../js/jquery.min.js"></script>
  <script src="../js/popper.min.js"></script>
  <script src="../js/bootstrap.min.js"></script>
  <link rel="stylesheet" href="../css/base.css">
  <link rel="stylesheet" href="../css/login.css">
</head>
<body>
  <header>
    <div class="container">
      <div class="row">
        <div class="col">
          <a href="#" class="logo">
            <img src="../img/logo.png">
          </a>
        </div>
        <div class="col d-flex align-items-center justify-content-end registe">
          <span>没有账号？</span>
          <a href="#" class="login-link">注册</a>
        </div>
      </div>
    </div>
  </header>

  <div class="container">
    <div class="row justify-content-center pt-3 mb30 font34">
      经常登录的同志是好同志
    </div>
    <div class="login-box float_g clearfix">
      <div class="social-login-box">
        <a href="#" class="social-login-icon social-login-icon-qq"></a>
        <a href="#" class="social-login-icon social-login-icon-weibo"></a>
        <a href="#" class="social-login-icon social-login-icon-douban"></a>
      </div>
      <div class="form-container">
        <form action="" method="post">
          <div class="error font12 w-100"></div>
          <div class="code-form">
            <div class="float_g clearfix mb30">
              <label for="tel">手机号</label>
              <div class="float_g clearfix">
                <div class="dropdown">
                  <span class="selected">中国大陆 +86 </span>
                  <span class="carat"></span>
                  <!-- select/option无法修改样式，用div/ul/li模拟select -->
                  <div>
                    <ul>
                      <li class="active">中国大陆 +86 </li>
                      <li class="">中国台湾 +886 </li>
                      <li class="">中国香港 +852 </li>
                      <li class="">中国澳门 +853 </li>
                      <li class="">美国 +1 </li>
                      <li class="">英国 +44 </li>
                      <li class="">加拿大 +1 </li>
                      <li class="">澳大利亚 +61 </li>
                      <li class="">韩国 +82 </li>
                      <li class="">日本 +81 </li>
                      <li class="">印尼 +62 </li>
                      <li class="">泰国 +66 </li>
                      <li>马来西亚 +60 </li>
                      <li class="">新加坡 +65 </li>
                      <li class="">法国 +33 </li>
                      <li class="">德国 +49 </li>
                      <li>意大利 +39 </li>
                      <li>瑞士 +41 </li>
                      <li>荷兰 +31 </li>
                      <li>丹麦 +45 </li>
                      <li>秘鲁 +51 </li>
                      <li class="">越南 +84 </li>
                      <li class="">菲律宾 +63 </li>
                      <li>缅甸 +95 </li>
                      <li>俄罗斯 +7 </li>
                      <li>柬埔寨 +855 </li>
                      <li>印度 +91 </li>
                      <li class="">老挝 +856 </li>
                      <li class="">巴西 +55 </li>
                      <li class="">新西兰 +64 </li>
                      <li class="">阿根廷 +54 </li>
                      <li class="">西班牙 +34 </li>
                      <li class="">瑞典 +46 </li>
                      <li>葡萄牙 +351 </li>
                      <li class="">比利时 +32 </li>
                      <li class="">哥伦比亚 +57 </li>
                      <li class="">爱尔兰 +353 </li>
                      <li>奥地利 +43 </li>
                      <li class="">阿拉伯联合酋长国 +971 </li>
                      <li class="">墨西哥 +52 </li>
                      <li class="">斯里兰卡 +94 </li>
                      <li>波兰 +48 </li>
                      <li>芬兰 +358 </li>
                      <li>智利 +56 </li>
                      <li>挪威 +47 </li>
                      <li class="">津巴布韦 +263 </li>
                      <li class="">匈牙利 +36 </li>
                      <li>吉尔吉斯斯坦 +996 </li>
                      <li>卢森堡 +352 </li>
                      <li>纳米比亚 +264 </li>
                      <li class="">南非 +27 </li>
                      <li>捷克 +420 </li>
                      <li class="">哥斯达黎加 +506 </li>
                      <li class="">巴拿马 +507 </li>
                      <li>毛里求斯 +230 </li>
                      <li>博茨瓦纳 +267 </li>
                      <li>科摩罗 +269 </li>
                    </ul>
                  </div>
                </div>
                <input class="tel" type="text" name="tel" autocomplete="off">
              </div>
            </div>
            <script>
              // 模拟select/option
              var $carat=$("span.carat");
              var $dropdown= $(".dropdown");
              var $li=$(".dropdown ul li");
              $dropdown.on("click",function(){
                // console.log(1);
                $(this).toggleClass("open");
              });
              $li.on("click",function(){
                // console.log(2);
                $li.removeClass("active");
                $(this).addClass("active");
                $("span.selected").html($(this).html());
              })
            </script>
            <div class="float_g clearfix mb30">
              <label class="drag-label">滑动验证</label>
              <div id="dragContainer">
                <!-- 拖动滑块时的背景 -->
                <div id="dragBg"></div>
                <div id="dragText">
                  <span>请按住滑块，拖动到最右边</span>
                </div>
                <!-- 滑块 -->
                <div id="dragHandler" class="dragHandlerBg">&gt;&gt;</div>
              </div> 
            </div>
            <script>
              //一、定义一个获取DOM元素的方法
              var getDom = function (selector) { return document.querySelector(selector); },
                box = getDom("#dragContainer"),//容器
                bg = getDom("#dragBg"),//背景
                text = getDom("#dragText>span"),//文字
                btn = getDom("#dragHandler"),//滑块
                success = false,//是否通过验证的标志
                distance = box.offsetWidth - btn.offsetWidth;//滑动成功的宽度（距离）

              //二、给滑块注册鼠标按下事件
              btn.onmousedown = function (e) {
                //1.鼠标按下之前必须清除掉后面设置的过渡属性
                btn.style.transition = "";
                bg.style.transition = "";

                //说明：clientX 事件属性会返回当事件被触发时，鼠标指针相对于浏览器页面(或客户区)的水平坐标

                //2.当滑块位于初始位置时，得到鼠标按下时的水平位置
                var e = e || window.event;
                var downX = e.clientX;

                //三、给文档注册鼠标移动事件
                document.onmousemove = function (e) {
                  var e = e || window.event;
                  //1.获取鼠标移动后的水平位置
                  var moveX = e.clientX;
                  //2.得到鼠标水平位置的偏移量（鼠标移动时的位置 - 鼠标按下时的位置）
                  var offsetX = moveX - downX;
                  //3.判断：鼠标水平移动的距离 与 滑动成功的距离 之间的关系
                  if (offsetX >= distance) {
                    offsetX = distance;//如果滑过了终点，就将它停留在终点位置
                    // 鼠标的水平移动距离 = 滑动成功的宽度时:
                    // 1.设置滑动成功后的样式
                    text.innerHTML = "验证通过";
                    text.style.color = "#fff";
                    btn.innerHTML = "";
                    btn.className = "btn_ok"
                    bg.style.backgroundColor = "#76c61d";
                    // 2.设置滑动成功后的状态
                    success = true;
                    // 成功后，清除掉鼠标按下事件和移动事件（因为移动时并不会涉及到鼠标松开事件）
                    btn.onmousedown = null;
                    document.onmousemove = null;
                    //3.成功解锁后的回调函数
                    setTimeout(function () {
                      // alert('验证成功！');
                    }, 100);
                  } else if (offsetX < 0) {
                    offsetX = 0;//没有滑过终点，就将它重置为起点位置
                  }
                  //4.根据鼠标移动的距离来动态设置滑块的偏移量和背景颜色的宽度
                  btn.style.left = offsetX + "px";
                  bg.style.width = offsetX + "px";
                }

                //四、给文档注册鼠标松开事件
                document.onmouseup = function (e) {
                  //如果鼠标松开时，滑到了终点，则验证通过
                  if (success) {
                    return;
                  } else {
                    //否则，将滑块复位（设置了1s的属性过渡效果）
                    btn.style.left = 0;
                    bg.style.width = 0;
                    btn.style.transition = "left 1s ease";
                    bg.style.transition = "width 1s ease";
                  }
                  //鼠标松开，则说明此时不需要拖动滑块，那么就清除鼠标移动和松开事件
                  document.onmousemove = null;
                  document.onmouseup = null;
                }
              }
            </script>
            <div class="float_g clearfix mb30">
              <label for="code">验证码</label>
              <div class="float_g clearfix">
                <a href="#" class="button sendCode font12">
                  <span class="action">发送验证码</span>
                  <span class="timer">5</span>
                </a>
                <input class="code" type="text" name="code" autocomplete="off">
              </div>
            </div>
            <script>
              $timer = $("span.timer");      
              $("a.sendCode").on("click",function(){ 
                // 先验证手机号码格式
                var $tel = $("input.tel");
                var valid_rule = /^(13[0-9]|14[5-9]|15[012356789]|166|17[0-8]|18[0-9]|19[8-9])[0-9]{8}$/;
                var phone_number = $tel.val();
                // console.log(phone_number)
                if (!valid_rule.test(phone_number)) {
                  // alert('手机号码格式有误');
                  $("form>.error").html('手机号码格式有误');
                  return false;
                }
                // 验证成功后开始倒计时
                $("span.action").html('重发验证码');
                $timer.css("display", "inline-block");
                var timeCounter=setInterval(function(){
                  var time = parseInt($timer.html());
                  time--;
                  if (time == 0) {
                    // $timer.html("");
                    $timer.css("display", "none");
                    clearInterval(timeCounter);
                  } else {
                    $timer.html(time);
                  }
                },1000);
              })
            </script>
          </div>
          <div class="login-form mb30 font12">
            <div class="text-right">
              <div>
                <a href="#" class="login-link">通过邮箱登录</a>
              </div>
              <div class="mt20">
                <a href="#" class="login-link">忘记密码</a>
              </div>
            </div>
            <div class="login-check">
              <input id="remember" class="remember" type="checkbox" checked="true" name="remember" >
              <label for="remember">记住我</label>
              <br>
              <input id="agree" class="mt20" type="checkbox" checked="true" name="agree">
              <label for="agree">
                我已阅读并同意下厨房<a href="#" class="login-link">《用户协议》</a>和<a href="#" class="login-link">《隐私政策》</a>
              </label>
            </div>
          </div>
          <div class="submit">
            <input type="submit" value="登录" class="submit button m-0">
          </div>
        </form>
      </div>
    </div>
  </div>
</body>

</html>